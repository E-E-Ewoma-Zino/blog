<!-- partial:partials/_head -->
<%- include("partials/_head") %>
	<!-- partial -->

	<!-- Login -->
	<div id="login" class="container-scroller">
		<div class="container-fluid page-body-wrapper full-page-wrapper">
			<div class="content-wrapper d-flex align-items-stretch auth auth-img-bg">
				<div class="row flex-grow">
					<div class="col-lg-6 d-flex align-items-center justify-content-center">
						<div class="auth-form-transparent text-left p-3">
							<div class="brand-logo" style="font-weight: bolder;">
								<img src="/admin/images/logo.png" class="img-fluid rounded-circle" style="width: 3rem;" alt="logo">
								Global Finance
							</div>
							<h4>Welcome back!</h4>
							<h6 class="font-weight-light">Happy to see you again!</h6>
							<form class="pt-3" action="/auth/login">
								<div class="form-group">
									<label for="exampleInputEmail">Email</label>
									<div class="input-group">
										<div class="input-group-prepend bg-transparent">
											<span class="input-group-text bg-transparent border-right-0">
												<i class="ti-user text-primary"></i>
											</span>
										</div>
										<input type="email" class="form-control form-control-lg border-left-0"
											id="exampleInputEmail" name="email" placeholder="Email" required>
									</div>
								</div>
								<div class="form-group">
									<label for="exampleInputPassword">Password</label>
									<div class="input-group">
										<div class="input-group-prepend bg-transparent">
											<span class="input-group-text bg-transparent border-right-0">
												<i class="ti-lock text-primary"></i>
											</span>
										</div>
										<input type="password" class="form-control form-control-lg border-left-0"
											id="exampleInputPassword" name="password" placeholder="Password" required>
									</div>
								</div>
								<div class="my-3">
									<button type="submit"
										class="btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn">LOGIN</button>
								</div>
								<div class="text-center mt-4 font-weight-light">
									Don't have an account? <a href="#x" id="openRegister"
										class="text-primary">Create</a>
								</div>
							</form>
						</div>
					</div>
					<div class="col-lg-6 login-half-bg d-flex flex-row">
						<p class="text-white font-weight-medium text-center flex-grow align-self-end">Copyright &copy;
							2022 All rights reserved.</p>
					</div>
				</div>
			</div>
			<!-- content-wrapper ends -->
		</div>
		<!-- page-body-wrapper ends -->
	</div>
	<!-- container-scroller -->

	<!-- register -->
	<div id="register" class="container-scroller">
		<div class="container-fluid page-body-wrapper full-page-wrapper">
			<div class="content-wrapper d-flex align-items-stretch auth auth-img-bg">
				<div class="row flex-grow">
					<div class="col-lg-6 d-flex align-items-center justify-content-center">
						<div class="auth-form-transparent text-left p-3">
							<div class="brand-logo" style="font-weight: bolder;">
								<img src="/admin/images/logo.png" class="img-fluid rounded-circle" style="width: 3rem;" alt="logo">
								Global Finance
							</div>
							<h4>New here?</h4>
							<h6 class="font-weight-light">Join us today! It takes only few steps</h6>
							<form class="pt-3" action="/auth/register">
								<div class="form-group">
									<label>Username</label>
									<div class="input-group">
										<div class="input-group-prepend bg-transparent">
											<span class="input-group-text bg-transparent border-right-0">
												<i class="ti-user text-primary"></i>
											</span>
										</div>
										<input type="text" class="form-control form-control-lg border-left-0"
											name="username" placeholder="Username">
									</div>
								</div>
								<div class="form-group">
									<label>Email</label>
									<div class="input-group">
										<div class="input-group-prepend bg-transparent">
											<span class="input-group-text bg-transparent border-right-0">
												<i class="ti-email text-primary"></i>
											</span>
										</div>
										<input type="email" name="email"
											class="form-control form-control-lg border-left-0" placeholder="Email">
									</div>
								</div>
								<div class="form-group">
									<label>Password</label>
									<div class="input-group">
										<div class="input-group-prepend bg-transparent">
											<span class="input-group-text bg-transparent border-right-0">
												<i class="ti-lock text-primary"></i>
											</span>
										</div>
										<input type="password" class="form-control form-control-lg border-left-0"
											id="exampleInputPassword" name="password" placeholder="Password">
									</div>
								</div>
								<div class="mt-3">
									<button type="submit"
										class="btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn">SIGN
										UP</button>
								</div>
								<div class="text-center mt-4 font-weight-light">
									Already have an account? <a href="#x" id="openLogin" class="text-primary">Login</a>
								</div>
							</form>
						</div>
					</div>
					<div class="col-lg-6 register-half-bg d-flex flex-row">
						<p class="text-white font-weight-medium text-center flex-grow align-self-end">Copyright &copy;
							2022 All rights reserved.</p>
					</div>
				</div>
			</div>
			<!-- content-wrapper ends -->
		</div>
		<!-- page-body-wrapper ends -->
	</div>
	<!-- components:components/messangeBird -->
	<%- include("utils/messageBird") %>
		<!-- components -->
		<!-- partial:partials/_scripts -->
		<%- include("partials/_scripts") %>
			<!-- partial -->
			<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
			<script>

				$(document).ready(function () {
					$("#register").hide();

					$(function () {
						$("#openRegister").click(function (e) {
							e.preventDefault();

							$("#login").fadeOut(300, function () {
								$("#register").fadeIn();
							});
						});

						$("#openLogin").click(function (e) {
							e.preventDefault();

							$("#register").fadeOut(300, function () {
								$("#login").fadeIn();
							});
						});

						$("form").submit(function (e) {
							e.preventDefault();

							const data = {}
							let button;

							for (let index = 0; index < this.length; index++) {
								const input = this[index];

								if (input.tagName === "BUTTON") {
									button = input;
									input.innerHTML = "Loading...";
									input.disabled = true;
								}

								if (input.tagName !== "INPUT") continue;

								data[input.name] = input.value;
							}

							try {
								axios.post(this.action, data).then(res => {
									messager({
										message: res.data.message,
										alert: res.data.alert,
										method: () => location.reload()
									});
								}).catch(err => {
									button.disabled = false;
									button.innerHTML = "Submit";

									console.error("error", err);
									console.error("error", err.response);
									if(err.response) messager({
										message: err.response.data.message,
										alert: err.response.data.alert
									});
									else messager({
										message: err.message,
										alert: "danger"
									});
								});
							} catch (error) {
								messager({
									message: "Check Your Internet Connection and Try Again",
									alert: "warning"
								});
							}
						});
					});

				});


			</script>
			</body>

			</html>